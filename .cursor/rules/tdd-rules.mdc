---
description:
globs:
alwaysApply: true
---
## TDD Flow

1. **Red**
   - Write a simple test for new behavior or to reproduce a bug.
   - Run it with `./run test`.

2. **Green**
   - Write just enough code to pass the test.
   - Run `./run test` again to confirm it passes.

3. **Refactor**
   - Improve code and tests without changing what they do.
   - Remove duplicates and make things clearer.
   - Run `./run test` to ensure it still works.

4. **Final Check**
   - Run `./run check` to make sure everything is correct.
   - Fix all problems, including lint errors and warnings.

## Test Rules

- Put tests in the same package as the code being tested. It's okay to test private methods.
- Don't write code just to satisfy tests unless it fixes real issues.
- Don't use stubsâ€”write real, working code.
- You can rerun specific tests to save time, but always run all tests before finishing.
